import{a as T}from"./chunk-CMPVXJNR.js";import{a as O}from"./chunk-2OOC5WRJ.js";import{a as L}from"./chunk-U7QLRQFP.js";import{Ab as l,Eb as s,La as M,P as _,Sb as P,Ta as I,Ua as C,W as v,X as g,Xa as y,Ya as A,bb as e,cb as t,db as E,ib as N,nb as B,pb as S,qb as a,rb as d,sb as x,tb as D,ub as k,za as i,zb as r}from"./chunk-2YHSOBKZ.js";import"./chunk-K5CSBBV3.js";var R=(m,o)=>o.id;function j(m,o){m&1&&(e(0,"p",28),a(1),r(2,"translate"),t()),m&2&&(i(),x("\u26A0\uFE0F ",l(2,1,"OVER_TARGET"),"!"))}function z(m,o){m&1&&(e(0,"p",29),a(1),r(2,"translate"),t()),m&2&&(i(),x("\u2713 ",l(2,1,"IN_TARGET")))}function Y(m,o){m&1&&(e(0,"span",43),a(1),r(2,"translate"),t()),m&2&&(i(),d(l(2,1,"SCHEDULED")))}function U(m,o){m&1&&(e(0,"span",44),a(1),r(2,"translate"),t()),m&2&&(i(),d(l(2,1,"EMERGENCY")))}function W(m,o){if(m&1&&(e(0,"tr",39)(1,"td",40),a(2),t(),e(3,"td",41),a(4),t(),e(5,"td",41),a(6),t(),e(7,"td",42),I(8,Y,3,3,"span",43)(9,U,3,3,"span",44),t()()),m&2){let n=o.$implicit;i(2),d(n.deviceName),i(2),d(n.technician),i(2),d(n.date),i(2),C(n.type==="scheduled"?8:9)}}function $(m,o){if(m&1&&(e(0,"div",2)(1,"div",3)(2,"div",4),v(),e(3,"svg",5),E(4,"path",6),t()(),g(),e(5,"div",7)(6,"p",8),a(7),r(8,"translate"),t(),e(9,"p",9),a(10),t()()(),e(11,"div",3)(12,"div",10),v(),e(13,"svg",11),E(14,"path",12),t()(),g(),e(15,"div",7)(16,"p",8),a(17),r(18,"translate"),t(),e(19,"p",9),a(20),t()()(),e(21,"div",3)(22,"div",13),v(),e(23,"svg",14),E(24,"path",15),t()(),g(),e(25,"div",7)(26,"p",8),a(27),r(28,"translate"),t(),e(29,"p",9),a(30),t()()(),e(31,"div",3)(32,"div",16),v(),e(33,"svg",17),E(34,"path",18),t()(),g(),e(35,"div",7)(36,"p",8),a(37),r(38,"translate"),t(),e(39,"p",9),a(40),t()()()(),e(41,"div",19)(42,"h2",20),a(43),r(44,"translate"),t(),e(45,"div",21)(46,"div",22)(47,"p",8),a(48),r(49,"translate"),t(),e(50,"p",23),a(51),t(),e(52,"p",24),a(53),t()(),e(54,"div",25)(55,"p",8),a(56),r(57,"translate"),t(),e(58,"p",26),a(59),t(),e(60,"p",24),a(61),r(62,"translate"),t()(),e(63,"div",27)(64,"p",8),a(65),r(66,"translate"),r(67,"translate"),t(),e(68,"p",26),a(69),t(),I(70,j,3,3,"p",28)(71,z,3,3,"p",29),t()(),e(72,"div",30)(73,"div",31)(74,"span"),a(75),r(76,"translate"),t(),e(77,"span"),a(78),t()(),e(79,"div",32),E(80,"div",33),t()()(),e(81,"div",19)(82,"h2",34),a(83),r(84,"translate"),t(),e(85,"div",35)(86,"table",36)(87,"thead")(88,"tr",37)(89,"th",38),a(90),r(91,"translate"),t(),e(92,"th",38),a(93),r(94,"translate"),t(),e(95,"th",38),a(96),r(97,"translate"),t(),e(98,"th",38),a(99),r(100,"translate"),t()()(),e(101,"tbody"),y(102,W,10,4,"tr",39,R),t()()()()),m&2){let n=N();i(7),d(l(8,41,"OPERATIONAL")),i(3),d(n.operationalDevices()),i(7),d(l(18,43,"MAINTENANCE_STATUS")),i(3),d(n.maintenanceDevices()),i(7),d(l(28,45,"OFFLINE")),i(3),d(n.offlineDevices()),i(7),x("",l(38,47,"TOTAL_DOWNTIME")," (h)"),i(3),d(n.totalDowntime()),i(3),D("\u{1F4CA} ",l(44,49,"MONTHLY_DOWNTIME")," - ",n.currentMonth),i(5),d(l(49,51,"TOTAL_DOWNTIME_HOURS")),i(3),x("",n.monthlyDowntime().totalHours,"h"),i(2),D("",n.monthlyDowntime().totalMinutes," min\xFAt z ",n.monthlyDowntime().logsCount," z\xE1znamov"),i(3),d(l(57,53,"AVERAGE_PERCENTAGE")),i(2),S(n.downtimePercentage().isOverTarget?"text-red-600":"text-green-600"),i(),x(" ",n.downtimePercentage().current,"% "),i(2),k("z ",n.downtimePercentage().workingHours,"h (",n.downtimePercentage().activeDevicesCount," ",l(62,55,"ACTIVE_DEVICES"),")"),i(2),S(n.downtimePercentage().isOverTarget?"border-red-500":"border-green-500"),i(2),D("",l(66,57,"TARGET")," / ",l(67,59,"STATUS")),i(3),S(n.downtimePercentage().isOverTarget?"text-red-600":"text-green-600"),i(),x(" ",n.downtimePercentage().target,"% "),i(),C(n.downtimePercentage().isOverTarget?70:71),i(5),d(l(76,61,"PROGRESS")),i(3),D("",n.downtimePercentage().current,"% / ",n.downtimePercentage().target,"%"),i(2),S(n.downtimePercentage().isOverTarget?"bg-red-500":"bg-green-500"),B("width",n.Math.min(n.parseFloat(n.downtimePercentage().current)/n.parseFloat(n.downtimePercentage().target)*100,100),"%"),i(3),d(l(84,63,"RECENT_MAINTENANCE_ACTIVITY")),i(7),d(l(91,65,"DEVICE")),i(3),d(l(94,67,"TECHNICIAN")),i(3),d(l(97,69,"DATE")),i(3),d(l(100,71,"TYPE")),i(3),A(n.recentLogs())}}function q(m,o){m&1&&(e(0,"div",1)(1,"div",45),v(),e(2,"svg",46),E(3,"path",47),t(),g(),e(4,"h3",48),a(5),r(6,"translate"),t(),e(7,"p",49),a(8),r(9,"translate"),t()()()),m&2&&(i(5),d(l(6,2,"LOADING_DATA")),i(3),d(l(9,4,"PLEASE_WAIT")))}var u=class u{constructor(){this.dataService=_(O);this.Math=Math;this.currentMonth=new Date().toLocaleDateString("sk-SK",{month:"long",year:"numeric"});this.devices=T(this.dataService.loadDevices(),{initialValue:[]});this.parts=T(this.dataService.getParts(),{initialValue:[]});this.logs=T(this.dataService.getMaintenanceLogs(),{initialValue:[]});this.operationalDevices=s(()=>this.devices().filter(o=>o.status==="operational").length);this.maintenanceDevices=s(()=>this.devices().filter(o=>o.status==="maintenance").length);this.offlineDevices=s(()=>this.devices().filter(o=>o.status==="offline").length);this.lowStockParts=s(()=>this.parts().filter(o=>o.quantity<10).length);this.totalDowntime=s(()=>this.devices().reduce((o,n)=>o+n.downtime,0).toFixed(1));this.monthlyDowntime=s(()=>{let o=new Date,n=o.getMonth(),c=o.getFullYear(),b=this.devices().filter(p=>p.status==="operational"||p.status==="maintenance").map(p=>p.id),h=this.logs().filter(p=>{let w=new Date(p.date),V=w.getMonth()===n&&w.getFullYear()===c,G=b.includes(p.deviceId);return V&&G}),f=h.reduce((p,w)=>p+(w.durationMinutes||0),0),F=f/60;return{totalMinutes:f,totalHours:F.toFixed(1),logsCount:h.length}});this.downtimePercentage=s(()=>{let o=parseFloat(this.monthlyDowntime().totalHours),n=this.devices().filter(f=>f.status==="operational"||f.status==="maintenance"),c=n.length*160,b=c>0?o/c*100:0,h=2.5;return{current:b.toFixed(2),target:h.toFixed(1),isOverTarget:b>h,workingHours:c,activeDevicesCount:n.length}});this.recentLogs=s(()=>this.logs().slice(0,5))}};u.\u0275fac=function(n){return new(n||u)},u.\u0275cmp=M({type:u,selectors:[["app-dashboard"]],decls:5,vars:4,consts:[[1,"text-3xl","font-semibold","text-gray-800","mb-6"],[1,"flex","items-center","justify-center","h-64"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-4","gap-6"],[1,"bg-white","p-6","rounded-lg","shadow-md","flex","items-center"],[1,"bg-green-100","p-3","rounded-full"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-6","w-6","text-green-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"ml-4"],[1,"text-sm","font-medium","text-gray-500"],[1,"text-2xl","font-bold","text-gray-800"],[1,"bg-yellow-100","p-3","rounded-full"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-6","w-6","text-yellow-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"],[1,"bg-red-100","p-3","rounded-full"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-6","w-6","text-red-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636"],[1,"bg-blue-100","p-3","rounded-full"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-6","w-6","text-blue-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"mt-8","bg-white","p-6","rounded-lg","shadow-md"],[1,"text-xl","font-semibold","text-gray-800","mb-4"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-6"],[1,"border-l-4","border-blue-500","pl-4"],[1,"text-3xl","font-bold","text-gray-800"],[1,"text-xs","text-gray-500","mt-1"],[1,"border-l-4","border-purple-500","pl-4"],[1,"text-3xl","font-bold"],[1,"border-l-4","pl-4"],[1,"text-xs","text-red-600","mt-1","font-semibold"],[1,"text-xs","text-green-600","mt-1","font-semibold"],[1,"mt-6"],[1,"flex","justify-between","text-sm","text-gray-600","mb-2"],[1,"w-full","bg-gray-200","rounded-full","h-4"],[1,"h-4","rounded-full","transition-all","duration-300"],[1,"text-xl","font-semibold","text-gray-800"],[1,"mt-4"],[1,"w-full","text-left"],[1,"text-xs","text-gray-500","uppercase","border-b"],[1,"py-2","px-4"],[1,"border-b","hover:bg-gray-50"],[1,"py-3","px-4","text-sm","text-gray-800"],[1,"py-3","px-4","text-sm","text-gray-600"],[1,"py-3","px-4","text-sm"],[1,"px-2","py-1","text-xs","font-semibold","text-blue-800","bg-blue-100","rounded-full"],[1,"px-2","py-1","text-xs","font-semibold","text-red-800","bg-red-100","rounded-full"],[1,"text-center"],["fill","none","viewBox","0 0 24 24","stroke","currentColor","aria-hidden","true",1,"mx-auto","h-12","w-12","text-gray-400"],["vector-effect","non-scaling-stroke","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 13h6m-3-3v6m-9 1V7a2 2 0 012-2h6l2 2h6a2 2 0 012 2v8a2 2 0 01-2 2H5a2 2 0 01-2-2z"],[1,"mt-2","text-sm","font-medium","text-gray-900"],[1,"mt-1","text-sm","text-gray-500"]],template:function(n,c){n&1&&(e(0,"h1",0),a(1),r(2,"translate"),t(),I(3,$,104,73)(4,q,10,6,"div",1)),n&2&&(i(),d(l(2,2,"DASHBOARD")),i(2),C(c.devices().length>0?3:4))},dependencies:[P,L],encapsulation:2,changeDetection:0});var H=u;export{H as DashboardComponent};
