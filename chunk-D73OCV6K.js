import{a as z}from"./chunk-Z5GHA2IP.js";import{a as F}from"./chunk-YV6XLDJ4.js";import{f as B}from"./chunk-QA33A7E6.js";import{a as w}from"./chunk-WGJBKP2V.js";import{a as k}from"./chunk-EPXSTM4K.js";import{Ca as e,Hb as M,Jb as p,Kb as c,Oa as E,Ob as D,S as g,X as b,Y as C,Za as m,_a as s,ac as N,bb as h,cb as S,db as L,ea as y,eb as n,fb as i,kb as T,mb as _,ob as f,ub as v,wb as o,xb as r,yb as I}from"./chunk-CLPMIFEJ.js";import"./chunk-K5CSBBV3.js";var G=t=>["/devices",t],P=(t,a)=>a.id;function V(t,a){t&1&&(n(0,"th",11),o(1),p(2,"translate"),i()),t&2&&(e(),r(c(2,1,"ACTIONS")))}function R(t,a){t&1&&(n(0,"span",17),o(1),p(2,"translate"),i()),t&2&&(e(),r(c(2,1,"SCHEDULED")))}function $(t,a){t&1&&(n(0,"span",18),o(1),p(2,"translate"),i()),t&2&&(e(),r(c(2,1,"EMERGENCY")))}function j(t,a){if(t&1){let l=T();n(0,"td",11)(1,"button",20),_("click",function(){b(l);let u=f().$implicit,O=f(2);return C(O.deleteLog(u.id,u.deviceName))}),o(2),p(3,"translate"),i()()}t&2&&(e(2),I(" \u{1F5D1}\uFE0F ",c(3,1,"DELETE")," "))}function H(t,a){if(t&1&&(n(0,"tr",13)(1,"td",14)(2,"a",15),o(3),i()(),n(4,"td",16),o(5),i(),n(6,"td",16),o(7),i(),n(8,"td",10),m(9,R,3,3,"span",17)(10,$,3,3,"span",18),i(),n(11,"td",19),o(12),i(),m(13,j,4,3,"td",11),i()),t&2){let l=a.$implicit,d=f(2);e(2),L("routerLink",M(7,G,l.deviceId)),e(),r(l.deviceName),e(2),r(l.technician),e(2),r(l.date),e(2),s(l.type==="scheduled"?9:10),e(3),r(l.notes),e(),s(d.authService.isAdmin()?13:-1)}}function U(t,a){if(t&1&&(n(0,"table",7)(1,"thead")(2,"tr",9)(3,"th",10),o(4),p(5,"translate"),i(),n(6,"th",10),o(7),p(8,"translate"),i(),n(9,"th",10),o(10),p(11,"translate"),i(),n(12,"th",10),o(13),p(14,"translate"),i(),n(15,"th",10),o(16),p(17,"translate"),i(),m(18,V,3,3,"th",11),i()(),n(19,"tbody",12),h(20,H,14,9,"tr",13,P),i()()),t&2){let l=f();e(4),r(c(5,6,"DEVICE")),e(3),r(c(8,8,"TECHNICIAN")),e(3),r(c(11,10,"DATE")),e(3),r(c(14,12,"TYPE")),e(3),r(c(17,14,"NOTES")),e(2),s(l.authService.isAdmin()?18:-1),e(2),S(l.filteredLogs())}}function Y(t,a){t&1&&(n(0,"div",8)(1,"p",21),o(2),p(3,"translate"),i()()),t&2&&(e(2),r(c(3,1,"LOADING_LOGS")))}function q(t,a){t&1&&(n(0,"div",8)(1,"p",21),o(2),p(3,"translate"),i()()),t&2&&(e(2),r(c(3,1,"NO_LOGS_FOUND_FILTER")))}var x=class x{constructor(){this.dataService=g(w);this.authService=g(F);this.logs=z(this.dataService.getMaintenanceLogs(),{initialValue:[]});this.filterType=y("all");this.filteredLogs=D(()=>{let a=this.filterType();return a==="all"?this.logs():this.logs().filter(l=>l.type===a)})}setFilter(a){this.filterType.set(a)}deleteLog(a,l){confirm(`Naozaj chcete vymaza\u0165 z\xE1znam \xFAdr\u017Eby pre zariadenie "${l}"?`)&&this.dataService.deleteMaintenanceLog(a).subscribe({next:()=>{console.log("\u2705 Maintenance log deleted:",a),this.dataService.getMaintenanceLogs().subscribe()},error:d=>{console.error("\u274C Error deleting maintenance log:",d),alert("Chyba pri mazan\xED z\xE1znamu: "+d.message)}})}};x.\u0275fac=function(l){return new(l||x)},x.\u0275cmp=E({type:x,selectors:[["app-maintenance-list"]],decls:20,vars:26,consts:[[1,"flex","justify-between","items-center","mb-6"],[1,"text-3xl","font-semibold","text-gray-800"],[1,"bg-white","p-6","rounded-lg","shadow-md"],[1,"mb-4","border-b"],["aria-label","Tabs",1,"flex","space-x-4"],[1,"px-3","py-2","font-medium","text-sm","rounded-t-md","border-b-2","border-transparent","text-gray-500","hover:text-gray-700","hover:border-gray-300",3,"click"],[1,"overflow-x-auto"],[1,"w-full","text-left"],[1,"text-center","py-10"],[1,"text-xs","text-gray-500","uppercase","border-b"],[1,"py-3","px-4"],[1,"py-3","px-4","text-center"],[1,"divide-y"],[1,"hover:bg-gray-50"],[1,"py-3","px-4","font-medium","text-gray-800"],[1,"text-blue-600","hover:underline",3,"routerLink"],[1,"py-3","px-4","text-gray-600"],[1,"px-2","py-1","text-xs","font-semibold","text-blue-800","bg-blue-100","rounded-full"],[1,"px-2","py-1","text-xs","font-semibold","text-red-800","bg-red-100","rounded-full"],[1,"py-3","px-4","text-gray-600","text-sm","max-w-xs","truncate"],["title","Vymaza\u0165 z\xE1znam",1,"text-red-600","hover:text-red-800","font-medium","text-sm",3,"click"],[1,"text-gray-500"]],template:function(l,d){l&1&&(n(0,"div",0)(1,"h1",1),o(2),p(3,"translate"),i()(),n(4,"div",2)(5,"div",3)(6,"nav",4)(7,"button",5),_("click",function(){return d.setFilter("all")}),o(8),p(9,"translate"),i(),n(10,"button",5),_("click",function(){return d.setFilter("scheduled")}),o(11),p(12,"translate"),i(),n(13,"button",5),_("click",function(){return d.setFilter("emergency")}),o(14),p(15,"translate"),i()()(),n(16,"div",6),m(17,U,22,16,"table",7)(18,Y,4,3,"div",8),m(19,q,4,3,"div",8),i()()),l&2&&(e(2),r(c(3,18,"MAINTENANCE_LOG")),e(5),v("border-blue-500",d.filterType()==="all")("text-blue-600",d.filterType()==="all"),e(),r(c(9,20,"ALL")),e(2),v("border-blue-500",d.filterType()==="scheduled")("text-blue-600",d.filterType()==="scheduled"),e(),r(c(12,22,"SCHEDULED")),e(2),v("border-blue-500",d.filterType()==="emergency")("text-blue-600",d.filterType()==="emergency"),e(),r(c(15,24,"EMERGENCY")),e(3),s(d.logs().length>0?17:18),e(2),s(d.filteredLogs().length===0&&d.logs().length>0?19:-1))},dependencies:[N,B,k],encapsulation:2,changeDetection:0});var A=x;export{A as MaintenanceListComponent};
