import{a as w}from"./chunk-E5UOQA7C.js";import{a as O}from"./chunk-6AKYKVHN.js";import{a as L}from"./chunk-7522RZT3.js";import{Ab as k,Ca as i,Jb as l,Kb as m,Oa as y,Ob as s,S as M,Z as x,Za as S,_ as v,_a as _,ac as P,bb as A,cb as N,hb as e,ib as t,jb as c,ob as T,tb as B,vb as D,wb as a,xb as r,yb as g,zb as C}from"./chunk-XYNLGK6V.js";import"./chunk-K5CSBBV3.js";var R=(d,o)=>o.id;function j(d,o){d&1&&(e(0,"p",28),a(1),l(2,"translate"),t()),d&2&&(i(),g("\u26A0\uFE0F ",m(2,1,"OVER_TARGET"),"!"))}function Y(d,o){d&1&&(e(0,"p",29),a(1),l(2,"translate"),t()),d&2&&(i(),g("\u2713 ",m(2,1,"IN_TARGET")))}function z(d,o){d&1&&(e(0,"span",43),a(1),l(2,"translate"),t()),d&2&&(i(),r(m(2,1,"SCHEDULED")))}function U(d,o){d&1&&(e(0,"span",44),a(1),l(2,"translate"),t()),d&2&&(i(),r(m(2,1,"EMERGENCY")))}function W(d,o){if(d&1&&(e(0,"tr",39)(1,"td",40),a(2),t(),e(3,"td",41),a(4),t(),e(5,"td",41),a(6),t(),e(7,"td",42),S(8,z,3,3,"span",43)(9,U,3,3,"span",44),t()()),d&2){let n=o.$implicit;i(2),r(n.deviceName),i(2),r(n.technician),i(2),r(n.date),i(2),_(n.type==="scheduled"?8:9)}}function $(d,o){if(d&1&&(e(0,"div",19)(1,"h2",34),a(2),l(3,"translate"),t(),e(4,"div",35)(5,"table",36)(6,"thead")(7,"tr",37)(8,"th",38),a(9),l(10,"translate"),t(),e(11,"th",38),a(12),l(13,"translate"),t(),e(14,"th",38),a(15),l(16,"translate"),t(),e(17,"th",38),a(18),l(19,"translate"),t()()(),e(20,"tbody"),A(21,W,10,4,"tr",39,R),t()()()()),d&2){let n=T(2);i(2),r(m(3,5,"RECENT_MAINTENANCE_ACTIVITY")),i(7),r(m(10,7,"DEVICE")),i(3),r(m(13,9,"TECHNICIAN")),i(3),r(m(16,11,"DATE")),i(3),r(m(19,13,"TYPE")),i(3),N(n.recentLogs())}}function q(d,o){d&1&&(e(0,"div",19)(1,"h2",20),a(2),l(3,"translate"),t(),e(4,"div",45),x(),e(5,"svg",46),c(6,"path",47),t(),v(),e(7,"p"),a(8),l(9,"translate"),t(),e(10,"p",48),a(11),l(12,"translate"),t()()()),d&2&&(i(2),r(m(3,3,"RECENT_MAINTENANCE_ACTIVITY")),i(6),r(m(9,5,"NO_MAINTENANCE_LOGS_YET")),i(3),r(m(12,7,"ADD_MAINTENANCE_LOG_FROM_DEVICE_DETAIL")))}function K(d,o){if(d&1&&(e(0,"div",2)(1,"div",3)(2,"div",4),x(),e(3,"svg",5),c(4,"path",6),t()(),v(),e(5,"div",7)(6,"p",8),a(7),l(8,"translate"),t(),e(9,"p",9),a(10),t()()(),e(11,"div",3)(12,"div",10),x(),e(13,"svg",11),c(14,"path",12),t()(),v(),e(15,"div",7)(16,"p",8),a(17),l(18,"translate"),t(),e(19,"p",9),a(20),t()()(),e(21,"div",3)(22,"div",13),x(),e(23,"svg",14),c(24,"path",15),t()(),v(),e(25,"div",7)(26,"p",8),a(27),l(28,"translate"),t(),e(29,"p",9),a(30),t()()(),e(31,"div",3)(32,"div",16),x(),e(33,"svg",17),c(34,"path",18),t()(),v(),e(35,"div",7)(36,"p",8),a(37),l(38,"translate"),t(),e(39,"p",9),a(40),t()()()(),e(41,"div",19)(42,"h2",20),a(43),l(44,"translate"),t(),e(45,"div",21)(46,"div",22)(47,"p",8),a(48),l(49,"translate"),t(),e(50,"p",23),a(51),t(),e(52,"p",24),a(53),t()(),e(54,"div",25)(55,"p",8),a(56),l(57,"translate"),t(),e(58,"p",26),a(59),t(),e(60,"p",24),a(61),l(62,"translate"),t()(),e(63,"div",27)(64,"p",8),a(65),l(66,"translate"),l(67,"translate"),t(),e(68,"p",26),a(69),t(),S(70,j,3,3,"p",28)(71,Y,3,3,"p",29),t()(),e(72,"div",30)(73,"div",31)(74,"span"),a(75),l(76,"translate"),t(),e(77,"span"),a(78),t()(),e(79,"div",32),c(80,"div",33),t()()(),S(81,$,23,15,"div",19)(82,q,13,9,"div",19)),d&2){let n=T();i(7),r(m(8,37,"OPERATIONAL")),i(3),r(n.operationalDevices()),i(7),r(m(18,39,"MAINTENANCE_STATUS")),i(3),r(n.maintenanceDevices()),i(7),r(m(28,41,"OFFLINE")),i(3),r(n.offlineDevices()),i(7),g("",m(38,43,"TOTAL_DOWNTIME")," (h)"),i(3),r(n.totalDowntime()),i(3),C("\u{1F4CA} ",m(44,45,"MONTHLY_DOWNTIME")," - ",n.currentMonth),i(5),r(m(49,47,"TOTAL_DOWNTIME_HOURS")),i(3),g("",n.monthlyDowntime().totalHours,"h"),i(2),C("",n.monthlyDowntime().totalMinutes," min\xFAt z ",n.monthlyDowntime().logsCount," z\xE1znamov"),i(3),r(m(57,49,"AVERAGE_PERCENTAGE")),i(2),D(n.downtimePercentage().isOverTarget?"text-red-600":"text-green-600"),i(),g(" ",n.downtimePercentage().current,"% "),i(2),k("z ",n.downtimePercentage().workingHours,"h (",n.downtimePercentage().activeDevicesCount," ",m(62,51,"ACTIVE_DEVICES"),")"),i(2),D(n.downtimePercentage().isOverTarget?"border-red-500":"border-green-500"),i(2),C("",m(66,53,"TARGET")," / ",m(67,55,"STATUS")),i(3),D(n.downtimePercentage().isOverTarget?"text-red-600":"text-green-600"),i(),g(" ",n.downtimePercentage().target,"% "),i(),_(n.downtimePercentage().isOverTarget?70:71),i(5),r(m(76,57,"PROGRESS")),i(3),C("",n.downtimePercentage().current,"% / ",n.downtimePercentage().target,"%"),i(2),D(n.downtimePercentage().isOverTarget?"bg-red-500":"bg-green-500"),B("width",n.Math.min(n.parseFloat(n.downtimePercentage().current)/n.parseFloat(n.downtimePercentage().target)*100,100),"%"),i(),_(n.recentLogs().length>0?81:82)}}function Q(d,o){d&1&&(e(0,"div",1)(1,"div",49),x(),e(2,"svg",50),c(3,"path",51),t(),v(),e(4,"h3",52),a(5),l(6,"translate"),t(),e(7,"p",53),a(8),l(9,"translate"),t()()()),d&2&&(i(5),r(m(6,2,"LOADING_DATA")),i(3),r(m(9,4,"PLEASE_WAIT")))}var u=class u{constructor(){this.dataService=M(O);this.Math=Math;this.currentMonth=new Date().toLocaleDateString("sk-SK",{month:"long",year:"numeric"});this.devices=w(this.dataService.loadDevices(),{initialValue:[]});this.parts=w(this.dataService.getParts(),{initialValue:[]});this.logs=w(this.dataService.getMaintenanceLogs(),{initialValue:[]});this.operationalDevices=s(()=>this.devices().filter(o=>o.status==="operational").length);this.maintenanceDevices=s(()=>this.devices().filter(o=>o.status==="maintenance").length);this.offlineDevices=s(()=>this.devices().filter(o=>o.status==="offline").length);this.lowStockParts=s(()=>this.parts().filter(o=>o.quantity<o.minQuantity).length);this.totalDowntime=s(()=>this.devices().reduce((o,n)=>o+n.downtime,0).toFixed(1));this.monthlyDowntime=s(()=>{let o=new Date,n=o.getMonth(),E=o.getFullYear(),b=this.devices().filter(p=>p.status==="operational"||p.status==="maintenance").map(p=>p.id),h=this.logs().filter(p=>{let I=new Date(p.date),V=I.getMonth()===n&&I.getFullYear()===E,G=b.includes(p.deviceId);return V&&G}),f=h.reduce((p,I)=>p+(I.durationMinutes||0),0),F=f/60;return{totalMinutes:f,totalHours:F.toFixed(1),logsCount:h.length}});this.downtimePercentage=s(()=>{let o=parseFloat(this.monthlyDowntime().totalHours),n=this.devices().filter(f=>f.status==="operational"||f.status==="maintenance"),E=n.length*160,b=E>0?o/E*100:0,h=2.5;return{current:b.toFixed(2),target:h.toFixed(1),isOverTarget:b>h,workingHours:E,activeDevicesCount:n.length}});this.recentLogs=s(()=>this.logs().slice(0,5))}};u.\u0275fac=function(n){return new(n||u)},u.\u0275cmp=y({type:u,selectors:[["app-dashboard"]],decls:5,vars:4,consts:[[1,"text-3xl","font-semibold","text-gray-800","mb-6"],[1,"flex","items-center","justify-center","h-64"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-4","gap-6"],[1,"bg-white","p-6","rounded-lg","shadow-md","flex","items-center"],[1,"bg-green-100","p-3","rounded-full"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-6","w-6","text-green-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"ml-4"],[1,"text-sm","font-medium","text-gray-500"],[1,"text-2xl","font-bold","text-gray-800"],[1,"bg-yellow-100","p-3","rounded-full"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-6","w-6","text-yellow-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"],[1,"bg-red-100","p-3","rounded-full"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-6","w-6","text-red-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636"],[1,"bg-blue-100","p-3","rounded-full"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-6","w-6","text-blue-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"mt-8","bg-white","p-6","rounded-lg","shadow-md"],[1,"text-xl","font-semibold","text-gray-800","mb-4"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-6"],[1,"border-l-4","border-blue-500","pl-4"],[1,"text-3xl","font-bold","text-gray-800"],[1,"text-xs","text-gray-500","mt-1"],[1,"border-l-4","border-purple-500","pl-4"],[1,"text-3xl","font-bold"],[1,"border-l-4","pl-4"],[1,"text-xs","text-red-600","mt-1","font-semibold"],[1,"text-xs","text-green-600","mt-1","font-semibold"],[1,"mt-6"],[1,"flex","justify-between","text-sm","text-gray-600","mb-2"],[1,"w-full","bg-gray-200","rounded-full","h-4"],[1,"h-4","rounded-full","transition-all","duration-300"],[1,"text-xl","font-semibold","text-gray-800"],[1,"mt-4"],[1,"w-full","text-left"],[1,"text-xs","text-gray-500","uppercase","border-b"],[1,"py-2","px-4"],[1,"border-b","hover:bg-gray-50"],[1,"py-3","px-4","text-sm","text-gray-800"],[1,"py-3","px-4","text-sm","text-gray-600"],[1,"py-3","px-4","text-sm"],[1,"px-2","py-1","text-xs","font-semibold","text-blue-800","bg-blue-100","rounded-full"],[1,"px-2","py-1","text-xs","font-semibold","text-red-800","bg-red-100","rounded-full"],[1,"text-center","py-8","text-gray-500"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"mx-auto","h-12","w-12","text-gray-400","mb-3"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"],[1,"text-sm","mt-2"],[1,"text-center"],["fill","none","viewBox","0 0 24 24","stroke","currentColor","aria-hidden","true",1,"mx-auto","h-12","w-12","text-gray-400"],["vector-effect","non-scaling-stroke","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 13h6m-3-3v6m-9 1V7a2 2 0 012-2h6l2 2h6a2 2 0 012 2v8a2 2 0 01-2 2H5a2 2 0 01-2-2z"],[1,"mt-2","text-sm","font-medium","text-gray-900"],[1,"mt-1","text-sm","text-gray-500"]],template:function(n,E){n&1&&(e(0,"h1",0),a(1),l(2,"translate"),t(),S(3,K,83,59)(4,Q,10,6,"div",1)),n&2&&(i(),r(m(2,2,"DASHBOARD")),i(2),_(E.devices().length>0?3:4))},dependencies:[P,L],encapsulation:2,changeDetection:0});var H=u;export{H as DashboardComponent};
