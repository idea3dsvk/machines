<div class="flex justify-between items-center mb-6">
  <h1 class="text-3xl font-semibold text-gray-800">{{ 'MAINTENANCE_LOG' | translate }}</h1>
</div>

<div class="bg-white p-6 rounded-lg shadow-md">
  <div class="mb-4 border-b">
    <nav class="flex space-x-4" aria-label="Tabs">
      <button (click)="setFilter('all')" [class.border-blue-500]="filterType() === 'all'" [class.text-blue-600]="filterType() === 'all'" class="px-3 py-2 font-medium text-sm rounded-t-md border-b-2 border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300">{{ 'ALL' | translate }}</button>
      <button (click)="setFilter('scheduled')" [class.border-blue-500]="filterType() === 'scheduled'" [class.text-blue-600]="filterType() === 'scheduled'" class="px-3 py-2 font-medium text-sm rounded-t-md border-b-2 border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300">{{ 'SCHEDULED' | translate }}</button>
      <button (click)="setFilter('emergency')" [class.border-blue-500]="filterType() === 'emergency'" [class.text-blue-600]="filterType() === 'emergency'" class="px-3 py-2 font-medium text-sm rounded-t-md border-b-2 border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300">{{ 'EMERGENCY' | translate }}</button>
    </nav>
  </div>
  
  <div class="overflow-x-auto">
    @if (logs().length > 0) {
      <table class="w-full text-left">
        <thead>
          <tr class="text-xs text-gray-500 uppercase border-b">
            <th class="py-3 px-4">{{ 'DEVICE' | translate }}</th>
            <th class="py-3 px-4">{{ 'TECHNICIAN' | translate }}</th>
            <th class="py-3 px-4">{{ 'DATE' | translate }}</th>
            <th class="py-3 px-4">{{ 'TYPE' | translate }}</th>
            <th class="py-3 px-4">{{ 'NOTES' | translate }}</th>
            @if (authService.isAdmin()) {
              <th class="py-3 px-4 text-center">{{ 'ACTIONS' | translate }}</th>
            }
          </tr>
        </thead>
        <tbody class="divide-y">
          @for (log of filteredLogs(); track log.id) {
            <tr class="hover:bg-gray-50">
              <td class="py-3 px-4 font-medium text-gray-800">
                <a [routerLink]="['/devices', log.deviceId]" class="text-blue-600 hover:underline">{{ log.deviceName }}</a>
              </td>
              <td class="py-3 px-4 text-gray-600">{{ log.technician }}</td>
              <td class="py-3 px-4 text-gray-600">{{ log.date }}</td>
              <td class="py-3 px-4">
                 @if (log.type === 'scheduled') {
                  <span class="px-2 py-1 text-xs font-semibold text-blue-800 bg-blue-100 rounded-full">{{ 'SCHEDULED' | translate }}</span>
                } @else {
                  <span class="px-2 py-1 text-xs font-semibold text-red-800 bg-red-100 rounded-full">{{ 'EMERGENCY' | translate }}</span>
                }
              </td>
              <td class="py-3 px-4 text-gray-600 text-sm max-w-xs truncate">{{ log.notes }}</td>
              @if (authService.isAdmin()) {
                <td class="py-3 px-4 text-center">
                  <button 
                    (click)="deleteLog(log.id, log.deviceName)" 
                    class="text-red-600 hover:text-red-800 font-medium text-sm"
                    title="Vymaza≈• z√°znam"
                  >
                    üóëÔ∏è {{ 'DELETE' | translate }}
                  </button>
                </td>
              }
            </tr>
          }
        </tbody>
      </table>
    } @else {
      <div class="text-center py-10">
        <p class="text-gray-500">{{ 'LOADING_LOGS' | translate }}</p>
      </div>
    }
     @if (filteredLogs().length === 0 && logs().length > 0) {
      <div class="text-center py-10">
        <p class="text-gray-500">{{ 'NO_LOGS_FOUND_FILTER' | translate }}</p>
      </div>
    }
  </div>
</div>
