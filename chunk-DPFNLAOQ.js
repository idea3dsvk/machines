import{a as F}from"./chunk-SOQTHN6Q.js";import{a as z}from"./chunk-QKRSOZBK.js";import{a as k}from"./chunk-4CAQGVAX.js";import{A as e,F as h,Fa as N,N as s,Na as B,O as m,R as S,S as L,T,U as n,V as i,_ as I,aa as _,ca as f,fa as v,ha as l,ia as r,ja as M,p as g,q as C,r as y,sa as D,ua as p,v as E,va as c,ya as b}from"./chunk-NTPXKIXG.js";import"./chunk-K5CSBBV3.js";var O=t=>["/devices",t],G=(t,a)=>a.id;function P(t,a){t&1&&(n(0,"th",11),l(1),p(2,"translate"),i()),t&2&&(e(),r(c(2,1,"ACTIONS")))}function V(t,a){t&1&&(n(0,"span",17),l(1),p(2,"translate"),i()),t&2&&(e(),r(c(2,1,"SCHEDULED")))}function R(t,a){t&1&&(n(0,"span",18),l(1),p(2,"translate"),i()),t&2&&(e(),r(c(2,1,"EMERGENCY")))}function $(t,a){if(t&1){let o=I();n(0,"td",11)(1,"button",20),_("click",function(){C(o);let u=f().$implicit,A=f(2);return y(A.deleteLog(u.id,u.deviceName))}),l(2),p(3,"translate"),i()()}t&2&&(e(2),M(" \u{1F5D1}\uFE0F ",c(3,1,"DELETE")," "))}function j(t,a){if(t&1&&(n(0,"tr",13)(1,"td",14)(2,"a",15),l(3),i()(),n(4,"td",16),l(5),i(),n(6,"td",16),l(7),i(),n(8,"td",10),s(9,V,3,3,"span",17)(10,R,3,3,"span",18),i(),n(11,"td",19),l(12),i(),s(13,$,4,3,"td",11),i()),t&2){let o=a.$implicit,d=f(2);e(2),T("routerLink",D(7,O,o.deviceId)),e(),r(o.deviceName),e(2),r(o.technician),e(2),r(o.date),e(2),m(o.type==="scheduled"?9:10),e(3),r(o.notes),e(),m(d.authService.isAdmin()?13:-1)}}function H(t,a){if(t&1&&(n(0,"table",7)(1,"thead")(2,"tr",9)(3,"th",10),l(4),p(5,"translate"),i(),n(6,"th",10),l(7),p(8,"translate"),i(),n(9,"th",10),l(10),p(11,"translate"),i(),n(12,"th",10),l(13),p(14,"translate"),i(),n(15,"th",10),l(16),p(17,"translate"),i(),s(18,P,3,3,"th",11),i()(),n(19,"tbody",12),S(20,j,14,9,"tr",13,G),i()()),t&2){let o=f();e(4),r(c(5,6,"DEVICE")),e(3),r(c(8,8,"TECHNICIAN")),e(3),r(c(11,10,"DATE")),e(3),r(c(14,12,"TYPE")),e(3),r(c(17,14,"NOTES")),e(2),m(o.authService.isAdmin()?18:-1),e(2),L(o.filteredLogs())}}function U(t,a){t&1&&(n(0,"div",8)(1,"p",21),l(2),p(3,"translate"),i()()),t&2&&(e(2),r(c(3,1,"LOADING_LOGS")))}function Y(t,a){t&1&&(n(0,"div",8)(1,"p",21),l(2),p(3,"translate"),i()()),t&2&&(e(2),r(c(3,1,"NO_LOGS_FOUND_FILTER")))}var x=class x{constructor(){this.dataService=g(z);this.authService=g(F);this.logs=b(()=>this.dataService.getMaintenanceLogsSignal()());this.filterType=E("all");this.filteredLogs=b(()=>{let a=this.filterType();return a==="all"?this.logs():this.logs().filter(o=>o.type===a)});this.dataService.getMaintenanceLogs().subscribe()}setFilter(a){this.filterType.set(a)}deleteLog(a,o){confirm(`Naozaj chcete vymaza\u0165 z\xE1znam \xFAdr\u017Eby pre zariadenie "${o}"?`)&&this.dataService.deleteMaintenanceLog(a).subscribe({next:()=>{console.log("\u2705 Maintenance log deleted:",a)},error:d=>{console.error("\u274C Error deleting maintenance log:",d),alert("Chyba pri mazan\xED z\xE1znamu: "+d.message)}})}};x.\u0275fac=function(o){return new(o||x)},x.\u0275cmp=h({type:x,selectors:[["app-maintenance-list"]],decls:20,vars:26,consts:[[1,"flex","justify-between","items-center","mb-6"],[1,"text-3xl","font-semibold","text-gray-800"],[1,"bg-white","p-6","rounded-lg","shadow-md"],[1,"mb-4","border-b"],["aria-label","Tabs",1,"flex","space-x-4"],[1,"px-3","py-2","font-medium","text-sm","rounded-t-md","border-b-2","border-transparent","text-gray-500","hover:text-gray-700","hover:border-gray-300",3,"click"],[1,"overflow-x-auto"],[1,"w-full","text-left"],[1,"text-center","py-10"],[1,"text-xs","text-gray-500","uppercase","border-b"],[1,"py-3","px-4"],[1,"py-3","px-4","text-center"],[1,"divide-y"],[1,"hover:bg-gray-50"],[1,"py-3","px-4","font-medium","text-gray-800"],[1,"text-blue-600","hover:underline",3,"routerLink"],[1,"py-3","px-4","text-gray-600"],[1,"px-2","py-1","text-xs","font-semibold","text-blue-800","bg-blue-100","rounded-full"],[1,"px-2","py-1","text-xs","font-semibold","text-red-800","bg-red-100","rounded-full"],[1,"py-3","px-4","text-gray-600","text-sm","max-w-xs","truncate"],["title","Vymaza\u0165 z\xE1znam",1,"text-red-600","hover:text-red-800","font-medium","text-sm",3,"click"],[1,"text-gray-500"]],template:function(o,d){o&1&&(n(0,"div",0)(1,"h1",1),l(2),p(3,"translate"),i()(),n(4,"div",2)(5,"div",3)(6,"nav",4)(7,"button",5),_("click",function(){return d.setFilter("all")}),l(8),p(9,"translate"),i(),n(10,"button",5),_("click",function(){return d.setFilter("scheduled")}),l(11),p(12,"translate"),i(),n(13,"button",5),_("click",function(){return d.setFilter("emergency")}),l(14),p(15,"translate"),i()()(),n(16,"div",6),s(17,H,22,16,"table",7)(18,U,4,3,"div",8),s(19,Y,4,3,"div",8),i()()),o&2&&(e(2),r(c(3,18,"MAINTENANCE_LOG")),e(5),v("border-blue-500",d.filterType()==="all")("text-blue-600",d.filterType()==="all"),e(),r(c(9,20,"ALL")),e(2),v("border-blue-500",d.filterType()==="scheduled")("text-blue-600",d.filterType()==="scheduled"),e(),r(c(12,22,"SCHEDULED")),e(2),v("border-blue-500",d.filterType()==="emergency")("text-blue-600",d.filterType()==="emergency"),e(),r(c(15,24,"EMERGENCY")),e(3),m(d.logs().length>0?17:18),e(2),m(d.filteredLogs().length===0&&d.logs().length>0?19:-1))},dependencies:[N,B,k],encapsulation:2,changeDetection:0});var w=x;export{w as MaintenanceListComponent};
